const eventBus=new Vue;Vue.component("filter-input",{props:{search:{type:String,required:!0}},template:'<input type="text" v-model="filterRow" :search="search" autocomplete="off" placeholder="Search">',data:()=>({filterRow:""}),watch:{filterRow(t){eventBus.$emit("row-filter",{field:this.search,val:t})}}}),Vue.component("filtered-tbody",{props:{products:{type:Array,required:!0}},template:'<tbody>            <tr v-for="product in products" :key="product.id" v-show="!product.hidden">                <td><a :href="\'view/\' + product.id">{{product.name}}</a></td>                <td>{{product.code}}</td>                <td>{{product.size}}</td>                <td class="text-right">{{product.stock | toNum(0)}}</td>                <td class="text-right">{{product.avaragePurchasePrice | toCurrency}}</td>                <td class="text-right">{{product.lastPurchasePrice | toCurrency}}</td>                <td class="text-right">{{product.stock * product.avaragePurchasePrice | toCurrency}}</td>                <td class="text-right">{{product.stock * product.lastPurchasePrice | toCurrency}}</td>            </tr>        </tbody>',data:()=>({searchResultsCount:0}),created(){eventBus.$on("row-filter",t=>{t?this.products.forEach(e=>{e[t.field]?e.hidden=-1==e[t.field].toLowerCase().indexOf(t.val.toLowerCase()):e.hidden=!0}):this.products.forEach(t=>{t.hidden=!1}),this.$parent.searchResultsCount=this.products.filter(t=>!0!==t.hidden).length})},filters:{toCurrency:t=>new Intl.NumberFormat("hu-HU",{style:"currency",currency:"HUF",minimumFractionDigits:0}).format(t),toNum:(t,e)=>e?t:parseInt(t)}}),new Vue({el:"table",data:{products:[],searchResultsCount:0},created(){fetch("stock.json").then(t=>t.json()).then(t=>{t.forEach(t=>{t.hidden=!1}),this.products=t,this.searchResultsCount=t.length}).catch(t=>console.log(t))}});