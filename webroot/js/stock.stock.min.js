Vue.component("table-row-filter",{template:'<input type="text" v-model="filterRow" :field="field" autocomplete="off" placeholder="Search">',props:["field"],data:()=>({products:[],filterByName:"",filterByCode:"",filterBySize:"",searchResultsCount:0}),watch:{filterByName(e){this.filterOut(e,"name")},filterByCode(e){this.filterOut(e,"code")},filterBySize(e){this.filterOut(e,"size")}},methods:{filterRow(e){e?this.products.forEach(t=>{t[field]?t.hidden=-1==t[field].toLowerCase().indexOf(e.toLowerCase()):t.hidden=!0}):this.products.forEach(e=>{e.hidden=!1}),this.searchResultsCount=this.products.filter(e=>!0!==e.hidden).length}},created(){fetch("stock.json").then(e=>e.json()).then(e=>{this.products=e,this.searchResultsCount=e.length}).catch(e=>console.log(e))},filters:{toCurrency:e=>new Intl.NumberFormat("hu-HU",{style:"currency",currency:"HUF",minimumFractionDigits:0}).format(e),toNum:(e,t)=>t?e:parseInt(e)}}),new Vue({el:"table",data:{products:[]}});