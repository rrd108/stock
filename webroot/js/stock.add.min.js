$(function(){let t;$("#storage-id").focus(),$(".group").hide(),$("#__partner-id").blur(function(){$("#items").prop("disabled",!1),partners[$("#partner-id").val()]||$("#sale").prop("checked",!1).change().prop("disabled",!0)}),$("#sale").change(function(){this.checked?($(this).parent().parent().parent().addClass("out").removeClass("in"),$(this).parent().find("span").text(StockTexts.hu.sale),$("td:nth-child(2), th:nth-child(2)").show(),$("td:nth-child(4), th:nth-child(4)").show(),$("td:nth-child(5), th:nth-child(5)").show(),$(".group").hide()):($(this).parent().parent().parent().addClass("in").removeClass("out"),$(this).parent().find("span").text(StockTexts.hu.purchase),$("td:nth-child(2), th:nth-child(2)").hide(),$("td:nth-child(4), th:nth-child(4)").hide(),$("td:nth-child(5), th:nth-child(5)").hide(),$(".group").show())}),$("form").submit(function(){n()&&$("table tbody tr:last").remove()});let n=function(){return!$("table tbody tr:last").find("input[type=hidden]").val()};$(document).on("focus","input.quantity",function(){t=$(this).parent().parent().prev().prev().find("input[type=hidden]").val();let n=products[t][4],e=products[t][5];$(this).parent().parent().next().html(number_format(n)+" / "+number_format(e)),$(this).parent().parent().next().next().html(number_format(e*(1+partners[$("#partner-id").val()]/100))),!$(this).parent().parent().next().next().next().find("input").val()>0&&$(this).parent().parent().next().next().next().find("input").val(number_format(e*(1+partners[$("#partner-id").val()]/100))),$(this).parent().parent().next().next().next().next().next().text(products[t][3]+" %")}),$(document).on("blur","input.net.price",function(){let n=str2Num($(this).val()),r=str2Num($(this).closest("tr").find("input.quantity").val())*n;$(this).parent().parent().next().text(number_format(r));let a=r*(products[t][3]/100);$(this).parent().parent().next().next().next().text(number_format(a)),$(this).parent().parent().next().next().next().next().text(number_format(r+a)),$(this).parent().parent().parent().find(".group input.price").each(function(){$(this).val(number_format(n*($(this).data("percentage")/100+1)))}),e($(this).closest("tbody"))});let e=function(t){return!0}});